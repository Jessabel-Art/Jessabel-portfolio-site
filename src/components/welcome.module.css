/* Root + motion vars */
.root{
  position: relative;
  min-height: 100svh;
  overflow: hidden;
  display: grid;
  place-items: center;
  cursor: none;

  /* --light is driven by JSX: 1 when not hovering, 0 on hover */
  --light: 1;

  --ground-y: 88vh;        /* from JSX / tuner */
  --orbit-offset-y: 70vh;  /* from JSX / tuner */
  --orbit-width: 42vw;     /* from JSX / tuner */

  /* CRT vignette focus */
  --crt-spot-x: 50%;
  --crt-spot-y: 45%;

  background: #0b0f1a;
}

/* Disable all transitions/animations until .ready to prevent pre-load flicker */
.root:not(.ready) *{
  animation: none !important;
  transition: none !important;
}

/* Parallax fades in only when ready */
.parallax{ position:relative; width:100%; height:100%; will-change: transform; opacity: 0; }
.ready .parallax{ opacity: 1; transition: opacity .35s ease; }

/* CRT overlay + vignette boost under cursor */
.crt::before{
  content:""; position:absolute; inset:0; pointer-events:none;
  background:
    radial-gradient(30% 30% at var(--crt-spot-x) var(--crt-spot-y), rgba(255,255,255,.08), rgba(255,255,255,0) 60%),
    repeating-linear-gradient(to bottom, rgba(255,255,255,0.06) 0px, rgba(255,255,255,0.06) 1px, rgba(0,0,0,0) 3px, rgba(0,0,0,0) 4px);
  mix-blend-mode: soft-light; opacity:.28;
}
.crt::after{
  content:""; position:absolute; inset:0; pointer-events:none;
  background: radial-gradient(100% 100% at 50% 50%, rgba(255,255,255,.05), transparent 70%);
  mix-blend-mode: overlay; opacity:.16;
}

/* Hidden SVG container */
.hiddenSvg{ position:absolute; width:0; height:0; }

/* Background */
.bg{ position:absolute; inset:0; width:100%; height:100%; object-fit: cover; transform: translateZ(0); }

/* Optional depth layers */
.depthFar{  transform: translateZ(0); }
.depthMid{  transform: translateZ(0); }
.depthGrid{ transform: translateZ(0); }

/* Watermark (top-left) */
.watermark{
  position: fixed;
  top: 16px; left: 16px;
  z-index: 21;
  display: inline-flex; align-items: center; justify-content: center;
  padding: 8px 14px;
  border-radius: 999px;
  text-decoration: none;
  color: #b7f6ff;
  font-family: 'Bungee', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  font-size: 14px; letter-spacing: .06em;
  text-shadow: 0 1px 0 rgba(0,0,0,.6);
  backdrop-filter: blur(6px);
}
.watermarkHalo{
  position: absolute; inset: -10px; border-radius: 999px; z-index: -1;
  background: radial-gradient(60% 60% at 50% 50%, rgba(0,240,255,.35), rgba(0,240,255,0) 70%);
  filter: blur(16px);
}
.watermarkText{
  position: relative;
  padding: 4px 10px;
  border-radius: 999px;
  background: rgba(6,12,22,.55);
  border: 1px solid rgba(120, 245, 255, .45);
  box-shadow:
    inset 0 8px 12px rgba(255,255,255,.06),
    0 10px 24px rgba(0,0,0,.35);
}
.watermark:hover .watermarkText{
  box-shadow:
    inset 0 8px 14px rgba(255,255,255,.08),
    0 14px 28px rgba(0,0,0,.4),
    0 0 26px rgba(0,255,255,.45);
}

/* Sun band area */
.sunBand{
  position:absolute; left:50%;
  top: calc(var(--ground-y) - 34vh);
  transform: translate(-50%,-50%);
  width: clamp(420px, 48vw, 880px);
  height: clamp(120px, 20vw, 260px);
  pointer-events:none;
}
.sunSweep{
  position:absolute; top:0; bottom:0; left:0; width: 30%;
  background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,.65) 50%, rgba(255,255,255,0) 100%);
  filter: blur(8px) saturate(1.1);
  opacity:.0;
}

/* Spotlight (fades with --light) */
.spot{
  position:absolute; left:50%;
  top: calc(var(--ground-y) - 28vh);
  transform: translate(-50%, -50%);
  width: clamp(260px, 38vw, 680px);
  aspect-ratio: 1 / 1;
  background-repeat:no-repeat; background-position:center; background-size:contain;
  opacity: calc(.15 + .85 * var(--light));
  filter: saturate(calc(.7 + .3 * var(--light))) blur(.2px);
  transition: opacity .25s ease, filter .25s ease, transform .25s ease;
  z-index: 1;
}

/* Mascot anchored to ground */
.mascotWrap{
  position:absolute; left:50%;
  top: var(--ground-y);
  transform: translate(-50%, -100%);
  width: clamp(220px, 32vw, 540px);
  aspect-ratio: 1 / 1;
  display:grid; place-items:center;
  z-index: 2;
}
.mascotImg{
  position:absolute; inset:0; margin:auto;
  width:100%; height:100%; object-fit:contain;
  user-select:none; pointer-events:none;
  filter: drop-shadow(0 10px 30px rgba(0,0,0,.45))
          drop-shadow(0 0 36px rgba(120,200,255,.35));
  transition: opacity .25s ease, transform .25s ease;
  animation: sway 7s ease-in-out infinite;
}
@keyframes sway{
  0%   { transform: translateY(0) rotate(0deg); }
  50%  { transform: translateY(-3px) rotate(.3deg); }
  100% { transform: translateY(0) rotate(0deg); }
}
.mascotMain{ opacity: var(--light); }
.mascotAlt { opacity: calc(1 - var(--light)); }

/* Mascot reflection */
.mascotReflection{
  position:absolute; left:50%;
  top: calc(var(--ground-y) + 8px);
  transform: translate(-50%, 0) scaleY(-1);
  width: clamp(220px, 32vw, 540px);
  height: calc(clamp(220px, 32vw, 540px) * 1);
  mask-image: linear-gradient(to bottom, rgba(255,255,255,.55), rgba(255,255,255,0) 70%);
  -webkit-mask-image: linear-gradient(to bottom, rgba(255,255,255,.55), rgba(255,255,255,0) 70%);
  filter: blur(3px) saturate(.95);
  opacity:.28;
  z-index: 1;
}
.refImg{ width:100%; height:100%; object-fit:contain; }

/* Ground shadow */
.shadow{
  position:absolute; left:50%;
  top: calc(var(--ground-y) + 8px);
  transform: translateX(-50%);
  width: clamp(180px, 28vw, 520px);
  height: clamp(28px, 3.8vw, 46px);
  border-radius: 999px;
  background: radial-gradient(60% 80% at 50% 50%, rgba(0,0,0,.55), rgba(0,0,0,0) 70%);
  filter: blur(2px);
  opacity: .55;
  z-index: 1;
}

/* ===== Dome orbit (icons) â€“ animate tiny WRAPPERS ========================= */
.orbitWrap{
  position: absolute;
  left: 50%;
  top: calc(var(--ground-y) - var(--orbit-offset-y));
  transform: translate(-50%, -50%);
  width: var(--orbit-width);
  height: calc(var(--orbit-width) * 0.5); /* viewBox 600x300 */
  pointer-events: none;
  z-index: 2;
}
.orbitSvg{ position: absolute; inset: 0; width: 100%; height: 100%; }

.orbiterWrap{
  position: absolute;
  width: 44px !important;   /* locked size as requested */
  height: 67px !important;  /* locked size as requested */
  pointer-events: auto;
}
.nudge{
  width: 100%; height: 100%;
  transform: translate(var(--nx,0px), var(--ny,0px));
}
.orbiterImg{
  width: 100% !important;
  height: 100% !important;
  max-width: none !important;
  max-height: none !important;
  object-fit: contain;
  display: block;
  filter: drop-shadow(0 3px 6px rgba(0,0,0,.4));
}

/* Top-right mute */
.muteDock{
  position: fixed; top: 18px; right: 18px; z-index: 19;
  width: 44px; height: 44px; border-radius: 999px;
  background: rgba(10,13,26,.5);
  border: 1px solid rgba(120,170,255,.35);
  color:#9fdcff; display:grid; place-items:center;
  box-shadow:0 10px 24px rgba(0,0,0,.3), inset 0 0 0 1px rgba(255,255,255,.05);
}
.muteGlyph{ font-size: 20px; line-height: 1; }

/* Bottom UI: XP + Enter */
.bottomUi{
  position:absolute; left:50%; transform: translateX(-50%);
  bottom: clamp(24px, 7vh, 96px);
  display:flex; flex-direction:column; align-items:center; gap:10px; z-index:5;
}

/* XP bar */
.xpWrap{ display:flex; align-items:center; gap:10px; color:#9fdcff; }
.xpTrack{
  width: clamp(220px, 34vw, 420px); height: 10px;
  border-radius: 999px; background: rgba(255,255,255,.12);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.1);
  overflow:hidden;
}
.xpFill{
  height:100%; width:0%;
  background: linear-gradient(90deg, #27E4FF, #06A4DD);
  box-shadow: 0 0 16px rgba(0,240,255,.55);
  transition: width .18s ease-out;
}
.xpLabel{
  font-family: 'Bungee', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  font-size: 12px; font-weight: 700; letter-spacing:.06em; opacity:.9;
}

/* --- Solid neon cyan ENTER, wider, with plate + pulses --- */
.enterBtn{
  position: relative;
  display:inline-flex; align-items:center; justify-content:center;
  padding: 1.1rem 2.8rem;
  border-radius: 999px;
  text-decoration: none;
  color: #02161b;
  background: linear-gradient(180deg,#27E4FF 0%, #07C2F2 60%, #06A4DD 100%);
  border: 1px solid rgba(120, 245, 255, .95);

  box-shadow:
    inset 0 -7px 0 rgba(0,0,0,.12),
    inset 0 10px 0 rgba(255,255,255,.18),
    0 14px 28px rgba(0,0,0,.58),
    0 0 38px rgba(0, 245, 255, .60);

  transform: translateZ(0);
  transition: transform .12s ease, box-shadow .2s ease, filter .2s ease;

  white-space: nowrap;
  min-width: 240px;
  will-change: transform, box-shadow, filter;
  animation: enterGlow 2.3s ease-in-out infinite;
}

/* BACK PLATE (separates from grid) */
.enterBtn::after{
  content:"";
  position:absolute; inset:-14px;
  border-radius:999px;
  background:
    radial-gradient(60% 70% at 50% 60%, rgba(6,12,22,.85), rgba(6,12,22,.45) 60%, rgba(6,12,22,0) 80%);
  filter: blur(12px);
  z-index:-2;
}

/* NEON HALO */
.enterBtn::before{
  content:"";
  position:absolute; inset:-14px;
  border-radius:999px;
  background: radial-gradient(50% 60% at 50% 50%, rgba(0,240,255,.55), rgba(0,240,255,0) 70%);
  filter: blur(20px);
  z-index:-1;
  pointer-events:none;
}

/* glossy top strip */
.enterShine{
  position:absolute; left:8px; right:8px; top:7px; height:47%;
  border-radius:999px;
  background: linear-gradient(180deg, rgba(255,255,255,.55), rgba(255,255,255,0));
  mix-blend-mode: screen;
  pointer-events:none;
}

/* animated diagonal sheen */
.enterSheen{
  position:absolute; inset:0; border-radius:999px; overflow:hidden; pointer-events:none;
}
.enterSheen::before{
  content:"";
  position:absolute; top:-50%; bottom:-50%; left:-30%;
  width:40%;
  background: linear-gradient(120deg, rgba(255,255,255,0) 0%, rgba(255,255,255,.55) 50%, rgba(255,255,255,0) 100%);
  filter: blur(10px);
  transform: translateX(-140%) rotate(20deg);
  animation: sheenPass 3.4s ease-in-out infinite 0.6s;
  opacity:.45;
}

/* thin inner rim for definition */
.enterRim{
  position:absolute; inset:0; border-radius:999px;
  box-shadow: inset 0 0 0 1px rgba(2, 36, 48, .28);
  pointer-events:none;
}

/* Button states */
.enterBtn:hover{
  transform: translateY(-3px) scale(1.02);
  box-shadow:
    inset 0 -7px 0 rgba(0,0,0,.14),
    inset 0  10px 0 rgba(255,255,255,.22),
    0 16px 34px rgba(0,0,0,.55),
    0 0 48px rgba(0,255,255,.72);
}
.enterBtn:active{
  transform: translateY(1px) scale(.985);
  box-shadow:
    inset 0 -5px 0 rgba(0,0,0,.18),
    inset 0  7px 0 rgba(255,255,255,.16),
    0 10px 20px rgba(0,0,0,.48),
    0 0 28px rgba(0,255,255,.55);
}
/* Locked state */
.enterBtn[aria-disabled="true"]{
  filter: grayscale(.2) brightness(.85);
  pointer-events: none;
  box-shadow:
    inset 0 -6px 0 rgba(0,0,0,.18),
    inset 0  8px 0 rgba(255,255,255,.16),
    0 10px 22px rgba(0,0,0,.5),
    0 0 18px rgba(0,255,255,.35);
}

/* text + arrow (Bungee) */
.enterText{
  position:relative; z-index:1;
  display:inline-flex; align-items:center; gap:.6rem;
  font-family: 'Bungee', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  font-weight:400; letter-spacing: 0.08em;
  font-size: clamp(15px, 2.2vw, 20px);
  color:#05212a;
  text-shadow:
    0 1px 0 rgba(255,255,255,.35),
    0 0 2px rgba(0,0,0,.22),
    0 2px 6px rgba(0,0,0,.22);
}
.enterText svg{ transition: transform .15s ease; }
.enterBtn:hover .enterText svg{ transform: translateX(7px); }

/* pulses + sheen */
@keyframes enterGlow{
  0%, 100% { filter: saturate(1); }
  50%      { filter: saturate(1.08) brightness(1.04); }
}
@keyframes sheenPass{
  0%   { transform: translateX(-140%) rotate(20deg); opacity:.0; }
  10%  { opacity:.45; }
  55%  { transform: translateX(160%) rotate(20deg); opacity:.0; }
  100% { transform: translateX(160%) rotate(20deg); opacity:.0; }
}

/* Custom cursor */
.cursorLayer{ position:fixed; inset:0; pointer-events:none; z-index:20; }
.cursorRing, .cursorDot{ position:fixed; left:0; top:0; transform: translate(-50%,-50%); pointer-events:none; will-change: transform; }
.cursorRing{ width:34px; height:34px; border-radius:999px; box-shadow:0 0 0 2px rgba(0,225,255,.8), inset 0 0 12px rgba(0,225,255,.35); filter: drop-shadow(0 0 12px rgba(0,225,255,.45)); }
.cursorDot{ width:6px; height:6px; border-radius:999px; background:#00e1ff; box-shadow:0 0 8px rgba(0,225,255,.6); }
.ping{ animation: ping .22s ease-out; }
@keyframes ping{ 0%{ transform: translate(-50%,-50%) scale(1); opacity:1; } 100%{ transform: translate(-50%,-50%) scale(1.4); opacity:.6; } }

@media (prefers-reduced-motion: reduce){
  .root{ cursor:auto; }
  .cursorLayer{ display:none; }
}

/* FX layer */
.fxLayer{ position:fixed; inset:0; pointer-events:none; z-index:18; }

/* click sparkles */
.spark{
  position: absolute; width:6px; height:6px; border-radius:999px;
  background: radial-gradient(circle, #7af6ff 0%, #00e1ff 60%, rgba(0,255,255,0) 100%);
  transform: translate(-50%, -50%);
  animation: sparkle var(--dur, .6s) ease-out forwards;
  filter: drop-shadow(0 0 8px rgba(0,255,255,.7));
}
@keyframes sparkle{
  from{ opacity:1; transform: translate(calc(-50% + 0px), calc(-50% + 0px)); }
  to  { opacity:0; transform: translate(calc(-50% + var(--dx)), calc(-50% + var(--dy))); }
}

/* falling star from icons */
.fallStar{
  position: absolute; width:7px; height:7px; border-radius:999px;
  background: radial-gradient(circle, #fff 0%, #FFD27A 60%, rgba(255,255,255,0) 100%);
  box-shadow: 0 0 12px #FFD27A;
  transform: translate(-50%, -50%);
  animation: fallStar 1.1s ease-in forwards;
}
@keyframes fallStar{
  from { opacity:1; transform: translate(-50%, -50%) scale(1); }
  to   { opacity:0; transform: translate(-50%, calc(-50% + var(--dy))) scale(.8); }
}

/* ===== Mascot bubble ===================================================== */
/* Position relative to mascot baseline so it scales across screens */
.bubbleWrap{
  position:absolute;
  left:50%;
  top: var(--ground-y);                 /* anchor: same as mascot */
  transform: translate(-50%, -100%);    /* start at mascot head */
  z-index: 6;
  pointer-events: none;                  /* bubble itself handles clicks */
  animation: bubbleEnter .45s ease-out both 1.2s; /* slight delayed pop-in */
}

/* Nudge bubble to the right and above the head */
.bubble{
  position: relative;
  left: clamp(120px, 12vw, 220px);
  top:  calc(-1 * clamp(80px, 12vw, 160px));
  max-width: clamp(200px, 28vw, 360px);
  padding: 12px 16px 14px 16px;
  border-radius: 14px;
  background: rgba(4, 12, 22, .82);
  border: 1px solid rgba(120, 245, 255, .55);
  color: #c7f7ff;
  font: 600 14px/1.45 'Bungee', system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif;
  letter-spacing: .02em;
  text-shadow: 0 1px 0 rgba(0,0,0,.45);
  box-shadow:
    0 12px 24px rgba(0,0,0,.35),
    0 0 22px rgba(0,255,255,.25);
  pointer-events: auto;                 /* clickable */
  animation: bubbleBob 6s ease-in-out infinite;
}

/* Tail pointing back toward the mascot */
.bubbleTail{
  position:absolute;
  left: clamp(12px, 2vw, 24px);
  bottom: -10px;
  width: 18px; height: 18px;
  background: inherit;
  border-left: 1px solid rgba(120, 245, 255, .55);
  border-bottom: 1px solid rgba(120, 245, 255, .55);
  transform: rotate(45deg);
  box-shadow:
    10px 10px 20px rgba(0,0,0,.25),
    0 0 18px rgba(0,255,255,.25);
}

/* Close button */
.bubbleClose{
  position:absolute; top:4px; right:6px;
  width: 22px; height: 22px; line-height: 20px;
  border-radius: 999px;
  border: 1px solid rgba(120, 245, 255, .45);
  background: rgba(255,255,255,.06);
  color: #9fdcff;
  font-weight: 700;
  display: grid; place-items: center;
  cursor: pointer;
  transition: transform .15s ease, filter .2s ease;
}
.bubbleClose:hover{ transform: scale(1.06); filter: drop-shadow(0 0 6px rgba(0,255,255,.6)); }

/* Text + subtle arrow wiggle */
.bubbleText{ padding-right: 20px; } /* make room for the close button */
.wiggle{ display:inline-block; animation: wiggleX 1.6s ease-in-out infinite; }

/* Motion */
@keyframes bubbleEnter{
  from{ opacity:0; transform: translate(-50%, -100%) translateY(8px) scale(.98); }
  to  { opacity:1; transform: translate(-50%, -100%) translateY(0)    scale(1); }
}
@keyframes bubbleBob{
  0%,100%{ transform: translateY(0); }
  50%    { transform: translateY(-4px); }
}
@keyframes wiggleX{
  0%,100%{ transform: translateX(0); }
  50%    { transform: translateX(3px); }
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce){
  .bubbleWrap{ animation: none; }
  .bubble{ animation: none; }
  .wiggle{ animation: none; }
}
